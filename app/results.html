<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Survey Results | SurveyPro</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center">
  <!-- Navbar (copy from other pages) -->
  <nav class="w-full bg-white shadow fixed top-0 left-0 z-10">
    <!-- ...navbar code... -->
  </nav>
  <div class="bg-white p-8 rounded shadow-md w-full max-w-xl mt-24">
    <h2 class="text-2xl font-bold mb-4" id="surveyTitle">Survey Results</h2>
    <p class="mb-4 text-gray-700" id="surveyQuestion"></p>
    <hr class="my-4">
    <h3 class="text-lg font-semibold mb-2">All Feedbacks</h3>
    <ul id="feedbackList" class="mb-4 space-y-2"></ul>
    <div id="analytics" class="mt-6"></div>
    <button onclick="window.location.href='surveys.html'"
  class="mt-6 px-4 py-2 bg-gradient-to-r from-red-500 via-pink-500 to-purple-500 text-white rounded font-semibold shadow transition-transform duration-200 hover:scale-105 hover:from-red-600 hover:to-purple-600 hover:shadow-lg">
  Back to Surveys
</button>
    <button type="submit"
  class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white px-6 py-2 rounded-lg shadow-lg transition-transform duration-200 hover:scale-110 hover:from-blue-600 hover:to-pink-600">
  Submit
</button>
  </div>
  <script>
    // Get survey id from URL
    function getSurveyId() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id');
    }

    async function loadResults() {
      const id = getSurveyId();
      if (!id) return;
      const res = await fetch(`http://localhost:5000/api/surveys/${id}`);
      const data = await res.json();
      document.getElementById('surveyTitle').textContent = data.title || "No Title";
      document.getElementById('surveyQuestion').textContent = data.question || "";
      const feedbackList = document.getElementById('feedbackList');
      feedbackList.innerHTML = "";
      (data.feedbacks || []).forEach((f, i) => {
        const li = document.createElement('li');
        li.className = "bg-gray-100 rounded px-3 py-2";
        li.textContent = `${i + 1}. ${f}`;
        feedbackList.appendChild(li);
      });

      // Simple analytics: total feedback count
      document.getElementById('analytics').innerHTML = `
        <div class="text-blue-700 font-semibold">Total Feedbacks: ${(data.feedbacks || []).length}</div>
      `;
    }

    loadResults();
  </script>
</body>
</html>